esphome:
  name: office_ble_hub
  platform: ESP32
  board: esp32doit-devkit-v1

wifi:
  ssid: !secret wifi_ssid
  password: !secret wifi_password
  # fast_connect: true

# Enable logging
logger:
  level: INFO

ota:
api:

# BLE Hub
esp32_ble_tracker:

sensor:
  - platform: wifi_signal
    name: "Office BLE Hub - WiFi Signal"
    update_interval: 60s

  # Track a Plant Sensor
  - platform: xiaomi_hhccjcy01
    mac_address: 'C4:7C:8D:63:E4:1B'
    temperature:
      name: "Basil Temperature"
    moisture:
      name: "Basil Moisture"
    illuminance:
      name: "Basil Illuminance"
    conductivity:
      name: "Basil Soil Conductivity"

# IR Remote Transmitter for the PTZ Camera
remote_transmitter:
  pin: GPIO4
  carrier_duty_percent: 50%

switch:
  - platform: template
    name: "PTZ: Preset 0"
    turn_on_action:
      remote_transmitter.transmit_nec:
        address: 0x22DD
        command: 0xB847
  - platform: template
    name: "PTZ: Preset 1"
    turn_on_action:
      remote_transmitter.transmit_nec:
        address: 0x22DD
        command: 0x30CF
  - platform: template
    name: "PTZ: Preset 4"
    turn_on_action:
      remote_transmitter.transmit_nec:
        address: 0x22DD
        command: 0x08F7

#### Reference: Captures of the PTZ remote:
# Power: address=0x22DD, command=0xD827
# Home: address=0x22DD, command=0x906F
# Up: address=0x22DD, command=0xA05F
# Down: address=0x22DD, command=0xB04F
# Left: address=0x22DD, command=0x10EF
# Right: address=0x22DD, command=0x50AF
# Zoom In: address=0x22DD, command=0x00FF
# Zoom Out: address=0x22DD, command=0x20DF
# Preset 1: address=0x22DD, command=0x30CF
# Preset 2: address=0x22DD, command=0x8877
# Preset 3: address=0x22DD, command=0x708F
# Preset 4: address=0x22DD, command=0x08F7
# Preset 5: address=0x22DD, command=0xA857
# Preset 6: address=0x22DD, command=0x48B7
# Preset 7: address=0x22DD, command=0x28D7
# Preset 8: address=0x22DD, command=0x9867
# Preset 9: address=0x22DD, command=0x6897
# Preset 0: address=0x22DD, command=0xB847
# Backlight: address=0x22DD, command=0xE817
# PTZ Reset: address=0x22DD, command=0x38C7
# Preset: address=0x22DD, command=0xF00F
